<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2048 — Lab</title>
  <style>
        :root{
      --bg:#f2efe9; --tile-bg:#cdc1b4; --accent:#7F3FF2;
      --board-size: min(480px, 90vmin);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
              *{box-sizing:border-box}
    body{margin:0;display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(180deg,#fafafa,#eee);color:#222}
    .app{width:100%;max-width:980px;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    h1{font-size:20px;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    button{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
    button.secondary{background:#666}
    .scoreboard{display:flex;gap:10px;align-items:center}
    .score{background:#fff;padding:8px 10px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.08)}
   .main{display:flex;gap:20px;flex-wrap:wrap}
    .board-wrap{background:transparent;padding:10px;border-radius:12px}
    .board{width:var(--board-size);height:var(--board-size);display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(4,1fr);gap:12px;padding:12px;background:rgba(0,0,0,0.05);border-radius:8px;position:relative}
    .cell{background:var(--tile-bg);border-radius:6px;display:flex;align-items:center;justify-content:center;font-weight:700;color:#776e65;font-size:22px}
    .tile{position:absolute;display:flex;align-items:center;justify-content:center;border-radius:6px;font-weight:800;transition:transform 160ms ease, top 160ms ease, left 160ms ease, opacity 160ms ease;min-width:calc((var(--board-size) - 12px*5)/4);min-height:calc((var(--board-size) - 12px*5)/4);}
    .tile .value{transform:translateZ(0)}
             .tile.v2{background:#eee4da;color:#776e65}
    .tile.v4{background:#ede0c8;color:#776e65}
    .tile.v8{background:#f2b179;color:#fff}
    .tile.v16{background:#f59563;color:#fff}
    .tile.v32{background:#f67c5f;color:#fff}
    .tile.v64{background:#f65e3b;color:#fff}
    .tile.v128{background:#edcf72;color:#fff;font-size:18px}
    .tile.v256{background:#edcc61;color:#fff;font-size:18px}
    .tile.v512{background:#edc850;color:#fff;font-size:16px}
    .tile.v1024{background:#edc53f;color:#fff;font-size:14px}
    .tile.v2048{background:#3c3bd3;color:#fff;font-size:14px}
    .tile.big{transform:scale(1.08)}
    .panel{flex:1;min-width:220px}
    .panel .info{background:#fff;padding:12px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.06)}
    .panel .actions{margin-top:12px;display:flex;gap:8px}
       @media (max-width:720px){
      .main{flex-direction:column;align-items:center}
      .panel{width:100%}
      .mobile-controls{display:flex}
      button{padding:10px 12px}
    }
  </style>
  </head>
<body>
    <div class="app">
    <header>
      <h1>2048 — Lab</h1>
      <div class="controls">
        <div class="scoreboard">
          <div class="score">Счёт: <span id="score">0</span></div>
          <div class="score">Лучший: <span id="best">0</span></div>
        </div>
        <div style="width:12px"></div>
        <div class="actions">
          <button id="undoBtn" class="secondary">Undo</button>
          <button id="restartBtn">Restart</button>
          <button id="leaderBtn" class="secondary">Leaderboards</button>
        </div>
      </div>
    </header>
   <div class="main">
       <div class="board-wrap">
        <div id="board" class="board"></div>
         </div>
        <div class="panel">
        <div class="info">
          <p>Управление: стрелки (desktop), свайпы или кнопки (мобилка)</p>
          <p>Функции: undo (отмена одного хода), сохранение состояния автоматически, лидерборд сохраняется в localStorage</p>
        </div>

        <div class="mobile-controls" id="mobileControls">
          <button data-dir="up">▲</button>
          <div style="display:flex;flex-direction:column;gap:8px">
            <button data-dir="left">◀</button>
            <button data-dir="down">▼</button>
            <button data-dir="right">▶</button>
          </div>
        </div>
      </div>
    </div>
          <div class="modal-back" id="modalBack">
      <div class="modal" id="modal">
        <div id="modalContent">
          <h3 id="modalTitle">Game over</h3>
          <p id="modalMsg">Введите имя чтобы сохранить рекорд</p>
          <div class="row" id="saveRow">
            <input id="playerName" type="text" placeholder="Ваше имя" />
            <button id="saveScoreBtn">Сохранить</button>
          </div>
          <div id="savedMsg" class="hidden">Ваш рекорд сохранён.</div>
          <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end">
            <button id="modalRestart">Начать заново</button>
            <button id="modalClose" class="secondary">Закрыть</button>
          </div>
        </div>
      </div>
    </div>
          <div class="modal-back" id="leaderBack">
      <div class="modal">
        <h3>Топ рекордов</h3>
        <table id="leaderTable">
          <thead><tr><th>Имя</th><th>Очки</th><th>Дата</th></tr></thead>
          <tbody></tbody>
        </table>
        <div style="margin-top:12px;text-align:right">
          <button id="clearLeaders" class="secondary">Очистить</button>
          <button id="closeLeaders">Закрыть</button>
        </div>
      </div>
    </div>
  </div>

    <script>
    </script>
        </body>
</html>
